<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>RishiGPT</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>
    <link rel="icon" href="favicon.png" />
  </head>
  <body>
    <i
      >This page is for testing and demonstration purposes only. There's no such
      thing as the Addlestone coal mine</i
    >
    <h1>RishiGPT</h1>
    <p>
      Prime Minister Rishi Sunak seems to come out with a new ridiculous excuse
      every week to justify his approval of the Addlestone coal mine.
    </p>

    <p>Poor Rishi, he must be getting tired.</p>

    <p>
      But dont worry! Now with the <b>power of AI</b> you can help Rishi
      generate crap excuses at scale!
    </p>

    <div class="prompt-builder">
      <form id="prompt-form">
        <select name="noun" id="noun">
          <option value="threat from">threat from</option>
          <option value="inspiration to our youth generated by">
            inspiration to our youth generated by
          </option>
          <option value="importance of">importance of</option>
          <option value="seductive quality of">seductive quality of</option>
          <option value="huge gains to be realised from">
            huge gains to be realised from
          </option>
        </select>
        <select name="preposition" id="preposition">
          <option value="tiny">tiny</option>
          <option value="massive">massive</option>
          <option value="cheesey">cheesey</option>
          <option value="attractive">attractive</option>
          <option value="lemony">lemony</option>
          <option value="wet">wet</option>
          <option value="flying">flying</option>
        </select>
        <select name="reason" id="reason">
          <option value="badgers">badgers</option>
          <option value="aubergines">aubergines</option>
          <option value="sardines">sardines</option>
          <option value="blobs">blobs</option>
          <option value="Elvis impersonators">Elvis impersonators</option>
        </select>
      </form>
      <button onclick="submitPrompt()">Go!</button>
    </div>
    <div class="statement">
      <div class="loading" style="display: none">...loading...</div>
      <img id="rishi-pic" style="display: none" src="rishi.gif" />
      <p class="typewriter"></p>
    </div>
    <script>
      const submitPrompt = () => {
        const formElement = document.getElementById("prompt-form");
        const data = new URLSearchParams(new FormData(formElement));
        document.getElementsByClassName("loading")[0].style.display = "block";
        fetch("http://localhost:5000/", {
          method: "post",
          body: data,
        })
          .then((res) => {
            return res.json();
          })
          .then((res) => {
            const { statementText } = res;
            document.getElementById("rishi-pic").style.display = "block";
            document.getElementsByClassName("loading")[0].style.display =
              "none";
            const statement = document.getElementsByClassName("typewriter")[0];
            const typewriter = new Typewriter(statement, {
              loop: true,
              delay: 75,
            });

            typewriter
              .typeString("A simple yet powerful native javascript")
              .start();
          });
      };
    </script>
  </body>
</html>
